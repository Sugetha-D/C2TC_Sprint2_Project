<h2>Order Service</h2>

<!-- Add Order Form -->
<form #orderForm="ngForm" (ngSubmit)="register(orderForm)" style="margin-bottom:20px;">
  <input type="number" name="customerId" ngModel placeholder="Customer ID" required style="margin-right:5px;">
  <input type="text" name="productList" ngModel placeholder="Items" required style="margin-right:5px;">
  <input type="number" name="totalAmount" ngModel placeholder="Price" required style="margin-right:5px;">
  <input type="text" name="paymentMode" ngModel placeholder="Payment Mode" required style="margin-right:5px;">
  <button type="submit">Add Order</button>
</form>

<!-- Edit Order Form -->
<div *ngIf="orderToUpdate.orderId" style="margin-bottom:20px; border:1px solid #ccc; padding:10px;">
  <h3>Edit Order ID: {{ orderToUpdate.orderId }}</h3>
  <form #editForm="ngForm" (ngSubmit)="updateOrder()">
    <input type="number" name="customerId" [(ngModel)]="orderToUpdate.customerId" placeholder="Customer ID" required style="margin-right:5px;">
    <input type="text" name="productList" [(ngModel)]="orderToUpdate.productList" placeholder="Items" required style="margin-right:5px;">
    <input type="number" name="totalAmount" [(ngModel)]="orderToUpdate.totalAmount" placeholder="Price" required style="margin-right:5px;">
    <input type="text" name="paymentMode" [(ngModel)]="orderToUpdate.paymentMode" placeholder="Payment Mode" required style="margin-right:5px;">
    <select name="status" [(ngModel)]="orderToUpdate.status" style="margin-right:5px;">
      <option value="PLACED">PLACED</option>
      <option value="SHIPPED">SHIPPED</option>
      <option value="DELIVERED">DELIVERED</option>
      <option value="CANCELLED">CANCELLED</option>
    </select>
    <button type="submit">Update Order</button>
    <button type="button" (click)="orderToUpdate = { orderId: null, customerId: '', productList: '', totalAmount: 0, paymentMode: '', status: '' }">Cancel</button>
  </form>
</div>

<!-- Orders Table -->
<table border="1" cellpadding="5" cellspacing="0" style="width:100%;">
  <thead>
    <tr>
      <th>ID</th>
      <th>Customer ID</th>
      <th>Items</th>
      <th>Price</th>
      <th>Payment Mode</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let order of orderDetails">
      <td>{{ order.orderId }}</td>
      <td>{{ order.customerId }}</td>
      <td>{{ order.productList }}</td>
      <td>{{ order.totalAmount }}</td>
      <td>{{ order.paymentMode }}</td>
      <td>
        <select [(ngModel)]="order.status" (change)="updateOrderStatus(order.orderId, order.status)">
          <option value="PLACED">PLACED</option>
          <option value="SHIPPED">SHIPPED</option>
          <option value="DELIVERED">DELIVERED</option>
          <option value="CANCELLED">CANCELLED</option>
        </select>
      </td>
      <td>
        <button (click)="edit(order)">Edit</button>
        <button (click)="deleteOrder(order.orderId)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
